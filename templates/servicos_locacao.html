{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <h3>Serviços da Locação #{{ locacao.id }} - {{ locacao.nome }} ({{ locacao.modelo }} - {{ locacao.placa }})</h3>

    <!-- Formulário adicionar serviço -->
    <form method="POST" class="row g-2 mb-3">
        <div class="col-md-4">
            <input type="text" class="form-control" name="descricao" placeholder="Descrição" required>
        </div>
        <div class="col-md-2">
            <input type="number" class="form-control" name="valor" step="0.01" placeholder="Valor (R$)">
        </div>
        <div class="col-md-3">
            <input type="number" class="form-control" name="quilometragem" placeholder="Quilometragem (Km)">
        </div>
        <div class="col-md-2">
            <button type="submit" class="btn btn-primary w-100">Adicionar</button>
        </div>
    </form>

    <!-- Tabela de serviços -->
    <h5>Serviços Registrados</h5>
    <table class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th>Data</th>
                <th>Descrição</th>
                <th>Valor</th>
                <th>Quilometragem (Km)</th>
            </tr>
        </thead>
        <tbody>
            {% if servicos %}
                {% for s in servicos %}
                <tr>
                    <td>{{ s.data_servico.strftime('%d/%m/%Y') }}</td>
                    <td>{{ s.descricao }}</td>
                    <td>R$ {{ '%.2f' | format(s.valor) }}</td>
                    <td>{{ s.quilometragem if s.quilometragem else '-' }}</td>
                </tr>
                {% endfor %}
            {% else %}
                <tr><td colspan="4" class="text-center">Nenhum serviço registrado.</td></tr>
            {% endif %}
        </tbody>
    </table>

    <a href="{{ url_for('locacoes') }}" class="btn btn-secondary">Voltar</a>
</div>
{% endblock %}